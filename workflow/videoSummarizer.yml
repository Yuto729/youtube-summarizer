name: YouTube Video Summarizer
description: Summarize YouTube videos and post to Slack

triggers:
  - type: api
    name: summarize_video

steps:
  - name: generate_summary
    type: llm
    model: gpt-4
    prompt: |
      ä»¥ä¸‹ã®YouTubeå‹•ç”»ã®å†…å®¹ã‚’è¦ç´„ã—ã¦ãã ã•ã„ï¼š
      ã‚¿ã‚¤ãƒˆãƒ«: {{video_title}}
      èª¬æ˜: {{video_description}}
      
      è¦ç´„ã¯ä»¥ä¸‹ã®ç‚¹ã‚’å«ã‚ã¦ãã ã•ã„ï¼š
      - å‹•ç”»ã®ä¸»ãªãƒˆãƒ”ãƒƒã‚¯
      - ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆ3-5ç‚¹ï¼‰
      - çµè«–ã‚„é‡è¦ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

  - name: post_to_slack
    type: action
    action: slack
    inputs:
      channel: "{{env.SLACK_CHANNEL_ID}}"
      blocks:
        - type: "header"
          text:
            type: "plain_text"
            text: "ğŸ¥ æ–°ã—ã„å‹•ç”»ãŒæŠ•ç¨¿ã•ã‚Œã¾ã—ãŸï¼"
        - type: "section"
          text:
            type: "mrkdwn"
            text: "*{{video_title}}*\nhttps://www.youtube.com/watch?v={{video_id}}"
        - type: "divider"
        - type: "section"
          text:
            type: "mrkdwn"
            text: "*AIè¦ç´„:*\n{{steps.generate_summary.output}}"

outputs:
  - name: summary
    description: å‹•ç”»ã®è¦ç´„
    type: string 